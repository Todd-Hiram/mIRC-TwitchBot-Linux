[script]
n0=on *:text:!timer *:#: {
n1=  if ($msgtags(mod).key == 1 || $right(#,-1) == $nick) {
n2=    if (add == $2) {
n3=      set %timer.channel. [ $+ [ $chan ] ] 
n4=      var %r = $read(# $+ timers.txt,ns,$3)
n5=      if (%r) { .msg $chan [ $+ $nick $+ ] : Error, This timer $qt($3) is already exist into the database! | return }
n6=      if ($4 < 60) { msg # Timer is set too low, please inscrease the amount of seconds the timer should run at. | return }
n7=      write # $+ timers.txt $3-
n8=      .timer $+ $3 $+ $chan 0 $4 TimerRun $3 $chan
n9=      msg $chan /me + Timer $3 has been added to the database!
n10=    }
n11=    if (del == $2) {
n12=      var %r = $read(# $+ timers.txt,ns,$3)
n13=      if (!%r) { .msg $chan [ $+ $nick $+ ]: Error, This timer $qt($3) does NOT exist into the database! | return }
n14=      write -dl $+ $readn # $+ timers.txt
n15=      .timer $+ $3 $+ $chan off
n16=      msg $chan /me - Timer $3 has been deleted from the database!
n17=    }
n18=    if (edit == $2) {
n19=      var %r = $read(# $+ timers.txt,ns,$3)
n20=      if (!%r) { .msg $chan [ $+ $nick $+ ]: Error, This timer $qt($3) does NOT exist into the database! | return }
n21=      if ($4 < 60) { msg # Timer is set too low, please inscrease the amount of seconds the timer should run at. | return }
n22=      write -l $+ $readn # $+ timers.txt $3-
n23=      .timer $+ $3 $+ $chan 0 $4 TimerRun $3 $chan
n24=      msg $chan /me -> Timer $3 has been updated!
n25=    }
n26=    if ($2 == on) {
n27=      var %r = $read(# $+ timers.txt,ns,$3)
n28=      if (!%r) { .msg $chan [ $+ $nick $+ ]: Error, This timer $qt($3) does NOT exist into the database! | return }
n29=      elseif ($timer($3 $+ $chan) != $null) { msg # Timer $3 is already on! }
n30=      else {
n31=        var %timermessage $read(# $+ timers.txt,ns,$3)
n32=        .timer $+ $3 $+ $chan 0 $gettok(%timermessage,1,32) TimerRun $3 $chan
n33=        msg $chan /me -> Timer $3 has been turned on!
n34=      }
n35=    }
n36=    if ($2 == off) {
n37=      var %r = $read(# $+ timers.txt,ns,$3)
n38=      if (!%r) { .msg $chan [ $+ $nick $+ ]: Error, This timer $qt($3) does NOT exist into the database! | return }
n39=      elseif ($timer($3 $+ $chan) == $null) { msg # Timer $3 is already off! }
n40=      else {
n41=        .timer $+ $3 $+ $chan off
n42=        msg $chan /me -> Timer $3 has been turned off!
n43=      }
n44=    }
n45=  }
n46=}
n47=
n48=on *:text:!timers off:#:{
n49=  if ($msgtags(mod).key == 1 || $right(#,-1) == $nick) {
n50=    var %numbertimers = $timer(0)
n51=    var %timer = 1
n52=    while (%timer <= %numbertimers) {
n53=      if ($right($timer(%timer),$len(#)) == #) {
n54=        .timer $+ $timer(%timer) off
n55=      }
n56=      inc %timer
n57=    }
n58=    msg # All timers are now off!
n59=  }
n60=}
n61=
n62=on *:join:#:{
n63=  if ($nick == $me) {
n64=    set %timer. [ $+ [ $chan ] ] 0
n65=    set %amountoftimers. [ $+ [ $chan ] ] $lines(# $+ timers.txt)
n66=    var %x. [ $+ [ $chan ] ] $lines(# $+ timers.txt)
n67=    while (%x. [ $+ [ $chan ] ]  > 0) {
n68=      var %timermessage $read(# $+ timers.txt, n, %x. [ $+ [ $chan ] ] )
n69=      var %time = $gettok(%timermessage,2,32)
n70=      var %timer. [ $+ [ $chan ] ] $calc(%timer. [ $+ [ $chan ] ] + %time )
n71=      dec %x. [ $+ [ $chan ] ] 
n72=    }
n73=    if (%amountoftimers. [ $+ [ $chan ] ] == 0)  { return }
n74=    var %avgtime. [ $+ [ # ] ] $calc(%timer. [ $+ [ $chan ] ] / $calc( $lines(# $+ timers.txt) * 5))
n75=    .timerfloodtimer. [ $+ [ $chan ] ] %amountoftimers. [ $+ [ $chan ] ] %avgtime. [ $+ [ # ] ] timeopen $chan
n76=  }
n77=}
n78=alias -l timeopen { 
n79=  if (%amountoftimers. [ $+ [ $1 ] ] > 0) {
n80=    var %timermessagespecific $read($1 $+ timers.txt,n,%amountoftimers. [ $+ [ $1 ] ] )
n81=    .timer $+ $gettok(%timermessagespecific,1,32) $+ [ $1 ] 0 $gettok(%timermessagespecific, 2,32) TimerRun $gettok(%timermessagespecific,1,32) $1
n82=    dec %amountoftimers. [ $+ [ $1 ] ]
n83=  }
n84=}
n85=
n86=alias -l TimerRun {
n87=  if (%chat. [ $+ [ $2 ] ] >= 1) {
n88=    var %timermessagespecific. $read($2 $+ timers.txt,ns, $1)
n89=    msg  $2  $gettok(%timermessagespecific.,2-,32)
n90=    set %chat. [ $+ [ $2 ] ] 0
n91=  }
n92=}
n93=on *:text:*:#:{
n94=  if (($nick != $me) && ($nick != twitchnotify))  {
n95=    set %chat. [ $+ [ $chan ] ] 1
n96=  }
n97=}
